# CSE344 - 2nd Week Lecture 1

The video lecture covers various topics in system programming, including system calls, error handling, process creation and management, and memory allocation. The speaker explains how system calls work, with the kernel performing requested tasks on behalf of the program. They highlight the importance of error handling, cautioning programmers to be mindful of different library errors and advising the use of standard error handling functions. The video also covers process creation and management, including unique identification numbers and the importance of the init process. Finally, the speaker explains the concept of memory allocation for a process during program execution, highlighting the dynamic nature of the heap and stack segments.

00:00:00 \
In this section, the speaker discusses system programming and how system calls work. They explain how a system call is a request made by the program to perform a task on the hardware, primarily the CPU and memory. The kernel or the core of the operating system performs these requests on behalf of the program. There are two modes for a program, user mode and kernel mode, where information about processes, libraries, and links are stored. The processes mode switches between the two modes as it requests and completes tasks. The speaker provides a block diagram to summarize the interactions between the application program, kernel, and hardware. \
\
00:05:00 \
In this section, the instructor explains how a system call is executed in the kernel space. When an application makes a system call, a corresponding wrapper function is invoked. The wrapper function communicates with the kernel's entries to execute the instruction. The necessary data from the user space is taken and passed to the system called service routine, which is executed when the kernel decides that it is time to execute that instruction. The return value is then returned back to the application, and if there is an error, it will be fed back to the global variable. Overall, this process involves copying the specific values from the stack to the CPU registers and saving registered values in the kernel stack. \
\
00:10:00\
&#x20;In this section, the lecturer explains the process of the kernel returning control to user space after a trap call. The new register values are stored in the current stack and can be passed by the wrapper trap back into the user space. If an error occurs during this process, it is sent back to the process to be handled, but the global nature of the error number variable can make it difficult for multi-threaded functions to work with it. Students are advised to use thread-safe functions instead of standard C libraries when working in a multi-threaded environment. \
\
00:15:00 \
In this section, the speaker discusses the importance of using libraries in programming and how they can make a program more readable and easier to access. However, not all libraries are created equal, and errors can occur when using them, making it necessary for programmers to be cautious when handling errors. While most libraries use a return value of -1 to indicate an error, some libraries return different values or use different error handling methods. Therefore, it is recommended to use the standard library, Gene lip C, as it has been used for more than 40 years and proven its usability in many occasions. When handling errors, it is important to include error messages and exit the program accordingly, and all error numbers are included in eer err and o.h. \
\
00:20:00\
In this section, the speaker discusses error handling in C language programming. They mention the importance of understanding how to handle errors properly, cautioning programmers to be mindful of the many errors that can occur in their systems. The speaker notes that there are special libraries and headers given to make it easier for programmers to handle errors, but they advise looking at the files and learning how errors are handled before relying on them blindly. They also mention that simply returning a number is not sufficient for understanding errors, and advise using functions like P error or Str er error to get a human-friendly view of the errors. Finally, they note that due to the numerous libraries written for C in the past 40 years, some libraries are not standard and may provide different values, making it important to check the libraries when getting a minus one. \
\
00:25:00\
&#x20;In this section, the speaker discusses the concept of error handling in computer programming and suggests the use of Google or Man pages to diagnose errors. They then describe the process of creating a process in the operating system, highlighting the resources and data structures allocated in both user and kernel space. The user space data structure contains information about the process such as the program's entry point address, data used, and memory allocation; while the kernel space data structure maintains the state of the process, virtual memory table, file description table, signals, and other usage information. The speaker emphasizes the importance of identifying processes with unique identification numbers to avoid confusion. \
\
00:30:00\
is composed of multiple processes, each process is identified by a unique ID using the get PID and get ppid system calls. The fork system call is used to create a new process and return two values: the ID of the child process to the parent process and zero to the child process. The concept of child and parent processes is crucial in programming and system programming, and their relationship is managed using these system calls. The init process serves as the ancestor of all processes, and if a child process becomes an orphan due to the exit of the parent process, it is owned by the init process to exit properly and free up resources for other processes. \
\
00:35:00\
In this section, the lecturer explains the memory allocation for a process when a program runs. The process is allocated a chunk of memory for its processing in the user space, consisting of some text segments, uninitialized data segments, and initialized data segments. The two dynamically changing portions are the stack and the heap, where the heap contains the dynamically allocated variables that appear at runtime, and the stack contains the return values of functions. The lecturer demonstrates a program sample with variables stored in different segments and explains how the heap segment is allocated using the malloc function, with the program break increasing if the heap does not contain enough memory.&#x20;

00:40:00\
&#x20;In this section, the speaker discusses the process of program execution and how memory is handled during program execution. They discuss how memory is allocated on the stack during execution and how it is freed once the program ends. The speaker also mentions the use of kernel space and provides directions for a memory location known as "be Memorial". Finally, the speaker introduces the concept of "processing a function" and explains how it relates to the execution processes of a program.
